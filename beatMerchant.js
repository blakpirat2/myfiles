// script.js

// Define your array of items and beatFiles for each zodiac sign
const data = {
  "aries_mercury": {
    beatNames: [
      "master splinter",
      "prime spot",
      "heroes to hypocrites",
      "jumaine - 89.63 -1 ",
      "call me",
      "friend world - 90-4",
      "harm monica"],
    beatFiles: [
      "https://www.dropbox.com/scl/fi/nyzi3hqfzz1exqy5xzcma/master-splinter.mp3?rlkey=z04ht49qyuk0o2nbwo55zz2c4&st=54ak3jb1&dl=1",
      "https://www.dropbox.com/scl/fi/ixrpfjymfurulwct337hv/prime-spot-92.mp3?rlkey=u9qf3zi2ha0bqdgw6dxtz2t52&st=d352eyqo&dl=1",
      "https://www.dropbox.com/scl/fi/j6nevjlseq46873cfq8x6/heroes-to-hypocrites.mp3?rlkey=whnhvn15lp61kcx340hsz9tas&st=a4apswse&dl=1",
      "https://www.dropbox.com/scl/fi/n4eutwza10i4hl1jxyxkj/jumaine-89.53-1.mp3?rlkey=0cz7b5tg9fidzq79wglakcg7z&st=cznqji5s&dl=1",
      "https://www.dropbox.com/scl/fi/clftetjj31f9zftrh7w4s/call-me.mp3?rlkey=1b8lj7ko3wftxzwhvl6s278g9&st=z4hedze9&dl=1",
      "https://www.dropbox.com/scl/fi/p2wxmcmgc00yxhazd09uc/friend-world-90-4.mp3?rlkey=zmbdbwlwqi8w55eevtgk0jlti&st=g1sx444a&dl=1",
      "https://www.dropbox.com/scl/fi/bilmm2msh9zot40nw4gas/harm-monica.mp3?rlkey=jcfp2a06w589qpdxcoulnbf2l&st=0mzbw8er&dl=1"]
  },
  
  "taurus_north_node": {
    beatNames: [
      "go on",
      "stevietooshy",
      "sum of my life",
      "monsters",
      "try-angle v2",
      "one of these days",
      "raea4",
      "morning good night",
      "79-4",
      "ten dollar bill",
      "mourning son",
      "horn frog",
      "keep our love true"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/ba8xchpjcesmaslkwh1ku/go-on-90.27.mp3?rlkey=p7ntggqk56awx4zt9zht2dhpv&st=6yn8i0ao&dl=1",
      "https://www.dropbox.com/scl/fi/682gvf74g5p5m5lfc9x77/stevietooshy_1.mp3?rlkey=seel7qb3cfv6fjjcmtg1aajb4&st=rwgknuas&dl=1",
      "https://www.dropbox.com/scl/fi/8280aq93yv2686ofhc439/sum-of-my-life-85.mp3?rlkey=5dc5mww68qq3x3q9sw3702uw5&st=pbdayc37&dl=1",
      "https://www.dropbox.com/scl/fi/8r4k5fbztkkxrx5apdgh2/monsters-93.mp3?rlkey=xxyq3p9f1kanta9j5u14fl3rv&st=pxp8rk2y&dl=1",
      "https://www.dropbox.com/scl/fi/fw1zpmkhzsn15qrwi1nko/try-angle-v2_1.mp3?rlkey=nej0fplzwficb1vyk7jujsxc6&st=h56z80yb&dl=1",
      "https://www.dropbox.com/scl/fi/5arr57x660ezjhcng7c8u/one-of-these-days-85.mp3?rlkey=ofksoiv0bapqq1sa6vverxtjf&st=5v4vh0pm&dl=1",
      "https://www.dropbox.com/scl/fi/cuc5bez97krp4eg6fnk6c/raea4.mp3?rlkey=ve8sfd1m9b8orlh3wzymceaec&st=b4074x65&dl=1",
      "https://www.dropbox.com/scl/fi/vtxgqzglzpbidp1ajymm7/morning-good-night-2-87.70-1.mp3?rlkey=3xrr7nyl8i3hde6zgd94bapng&st=lsup9aja&dl=1",
      "https://www.dropbox.com/scl/fi/vm9ikulnagzix8olsqsww/79-4-88.40.mp3?rlkey=4c14059x8kn3yeu5s50yux9dg&st=5x9uq3a8&dl=1",
      "https://www.dropbox.com/scl/fi/vu1n43k6xm9vgm6wrz3my/ten-dollar-bill-v2-90.79-2.mp3?rlkey=8s623l7qhmn2sx21hrn1vms63&st=cfd4hl9b&dl=1",
      "https://www.dropbox.com/scl/fi/pudpfgympipx5bv5n1x9v/mourning-son.mp3?rlkey=07pjqjn6d9aiv38xjg8ib70vp&st=l78hd8vz&dl=1",
      "https://www.dropbox.com/scl/fi/zlwk0wlm3oc0makx6vqj2/horn-frog-84.mp3?rlkey=i65ejoxfa1uf3kbtz74dq46il&st=khkc8e2a&dl=1",
      "https://www.dropbox.com/scl/fi/2bhod3c1kqcb2lw4gtki1/keep-our-love-true-92.22-1.mp3?rlkey=f9pklprs649ciyggm158co9po&st=smhb3ayo&dl=1"
    ]
  },
  "gemini_chiron": {
    beatNames: [
      "forgave yourself - 90 - quieter triangle",
      "home6",
      "music generation v2 - 90",
      "GPS - 90",
      "apologize for my thoughts v5",
      "htss"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/ahjq9an8uvtdka9exai8p/forgave-yourself-90-quieter-triangle.mp3?rlkey=4achgp31rddsvji692cy6japa&st=pxgxsp21&dl=1",
      "https://www.dropbox.com/scl/fi/9f8g2adgo6n9yvcbvo8q8/home6-120.mp3?rlkey=i7fa32ujagfbrvi1wnnh1nk8z&st=wnt1efzk&dl=1",
      "https://www.dropbox.com/scl/fi/nh8shxkqad0o5cv273are/music-generation-v2-90.mp3?rlkey=pw384q5oc62er00267ply3yre&st=8d7hhe6p&dl=1",
      "https://www.dropbox.com/scl/fi/htwvq61m31u03o4czu0cf/GPS-90.mp3?rlkey=ibdt6omtmjgzbv0g50u7x6a4s&st=ggio6enr&dl=1",
      "https://www.dropbox.com/scl/fi/271j6dgtb45ostts1weuy/apologize-for-my-thoughts-v5.mp3?rlkey=bdugz5ygbh7miet7sfh8n1tfw&st=n4irs7au&dl=1",
      "https://www.dropbox.com/scl/fi/dvslf5ay2xy9y518lodyo/htss.mp3?rlkey=rvkcwf34yuq8yzb1z4oh7waa1&st=q8i079c7&dl=1"
    ]
  },
  "cancer_sun": {
    beatNames: [
      "garden chill",
      "poltergeist",
      "home10 - 120",
      "might find your way - 91 -2 -3",
      "como se dice - 85",
      "millennium park",
      "78-1 - 80.67"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/glqee8qaphwrhuzn4e04i/garden-chill.mp3?rlkey=kbe96ja23i7rh2xf0nzedayd1&st=vyil7td5&dl=1",
      "https://www.dropbox.com/scl/fi/kopd9nd90p8ifl7hnh9bo/poltergiest.mp3?rlkey=h20njzw6sxi3mtqs9iysl8qt5&st=1me9uyxa&dl=1",
      "https://www.dropbox.com/scl/fi/xkotnt1ooadvo0aki1h9m/home10-120.mp3?rlkey=o0wjyo59rqg3b3svwq0jm7d2h&st=cb9kb26t&dl=1",
      "https://www.dropbox.com/scl/fi/9991mh8g4c0zcdxb3ekbn/might-find-your-way-91-2-3.mp3?rlkey=53ennagql4kj5r78123d2syih&st=svrkbz1s&dl=1",
      "https://www.dropbox.com/scl/fi/qg55v1vnccrps7ejmbldo/como-se-dice-85.mp3?rlkey=yvd7qtwuk1ac4563li58z83d7&st=fkxl238y&dl=1",
      "https://www.dropbox.com/scl/fi/1fp5was4khoihnsxcds7v/millenium-park.mp3?rlkey=i1wiq47n8f1tponkcvdzq7zdj&st=4lh8c6vk&dl=1",
      "https://www.dropbox.com/scl/fi/05z6mbze6ypi61xzfww5d/78-1-80.67.mp3?rlkey=2zvfqxb8eot4767gglprdx5a9&st=r6r9ymb6&dl=1",
    ]
  },
  "leo_moon": {
    beatNames: [
      "why would i jump 90 bpm",
      "impossible possibility_1",
      "wouldn_t be so bad - 1",
      "new city night",
      "stutter",
      "crates in college",
      "starfucker - 80.19",
      "going home",
      "heart went out",
      "memorial - 88_1_1",
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/x73afi1qf4btjqksl3sn6/why-would-i-jump-90-bpm.mp3?rlkey=f7mwopgyyyet9darle5yvnrjg&st=cpl2a0yu&dl=1",
      "https://www.dropbox.com/scl/fi/5mum47mmhcfilxx7tycd1/impossible-possibility_1.mp3?rlkey=0u43az7qlgaouy9dv72uqptna&st=xj9uidwx&dl=1",
      "https://www.dropbox.com/scl/fi/3og4rd8xx6z1ah2rrbouo/wouldn_t-be-so-bad-1.mp3?rlkey=9ua1r2xt4qui23bsyhtlo36ma&st=fzlenxge&dl=1",
      "https://www.dropbox.com/scl/fi/95rl55tk1mk9q0kn1zdjk/new-city-night.mp3?rlkey=xen1lz3mrmp5pbvkidzo8hg0l&st=n0mr28gs&dl=1",
      "https://www.dropbox.com/scl/fi/issygbj95cx09qi08peog/stutter.mp3?rlkey=sktja5f0faixmefgttlwnfwgf&st=ocitdg55&dl=1",
      "https://www.dropbox.com/scl/fi/scwubexv4r8vbpq2mz57x/crates-in-college.mp3?rlkey=sl761gpqqjsnnfz11lw7a4t5w&st=c5u73viy&dl=1",
      "https://www.dropbox.com/scl/fi/solww7xi55u0frhe01mgx/starfucker-80.19.mp3?rlkey=kwbaz06azk44iivlkcco6k4es&st=lw8bzjqw&dl=1",
      "https://www.dropbox.com/scl/fi/o94hgmj97e5c7buamgizl/going-home.mp3?rlkey=w01bcyou1z43iqjcffmfh39d4&st=i7vdf7ob&dl=1",
      "https://www.dropbox.com/scl/fi/mz93e6wo6ygukcu5nh9an/heart-went-out.mp3?rlkey=7cm48na9bj1drx2vyxuo2sdhx&st=khuy5cpw&dl=1",
      "https://www.dropbox.com/scl/fi/2alb5oik4vxg6pkzhfcj1/memorial-88_1_1.mp3?rlkey=98y0f5jd5ehwg9x4as9pwyyk7&st=4fpbij78&dl=1",
    ]
  },
  "virgo_stellium": {
    beatNames: [
      "the envious_1",
      "day two (bass switch)_1",
      "delphine",
      "better things",
      "mercury v2 - 56",
      "study break",
      "716-3",
      "the watchmen"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/59dkbmfmb6wckauvzfyax/the-envious_1.mp3?rlkey=hdimogiodbv2k8586slscrkw3&st=0fosxdrp&dl=1",
      "https://www.dropbox.com/scl/fi/zryh8x4r8wroeqd6zth3y/day-two-bass-swtich-_1.mp3?rlkey=h20d2agm5zrmxn193d09jqxw3&st=jbcx7g9y&dl=1",
      "https://www.dropbox.com/scl/fi/1fcxi9sbw5y5una6lpbra/delphine.mp3?rlkey=iixbgozen16fuqlmm47jgavx3&st=d3ox79ql&dl=1",
      "https://www.dropbox.com/scl/fi/xq80cmkr830eesyjxapju/better-things.mp3?rlkey=xhij06lsv8assuntq0eoa6ya6&st=o7ycrshf&dl=1",
      "https://www.dropbox.com/scl/fi/k6tny68rgh3th67l0o9zz/mercury-v2-56.mp3?rlkey=mtuescmxd4xasj7qxm2mhhawk&st=9sbeuzhi&dl=1",
      "https://www.dropbox.com/scl/fi/9ilmikdqxq0vfj7ba07bz/study-break.mp3?rlkey=h671s9f0qhdug3j4xpwgg50gk&st=7v3fh0w3&dl=1",
      "https://www.dropbox.com/scl/fi/2qyhv0x5oco8k6a4vc2qi/716-3-83.78.mp3?rlkey=ybqvuudpykc7ih3y1c8nq4q4l&st=9i41pwuw&dl=1",
      "https://www.dropbox.com/scl/fi/10o6r6z47e6jpoch4b0mn/the-watchmen.mp3?rlkey=cg4jl41fcasfrmd2vpdrmxozn&st=4elsgjah&dl=1"
    ]
  },
  "libra_mars": {
    beatNames: [
      "moment's notice",
      "through it all",
      "2ND ENVY CHOP",
      "satisfy you2",
      "you shared",
      "curtains ep6",
      "holy moly automation",
      "ease himself"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/beor07ca1nqfm6p9chhdj/moment-s-notice.mp3?rlkey=8r0oeu9gofv4zobd6a061goap&st=uitt050s&dl=1",
      "https://www.dropbox.com/scl/fi/5ggseocofet99wb3xy378/through-it-all.mp3?rlkey=xfnhqw3qns26xi8iqd5axvva4&st=1s04jblt&dl=1",
      "https://www.dropbox.com/scl/fi/hvxo99s9qcte8mnvsbxpr/2ND-ENVY-CHOP_1.mp3?rlkey=3f5ge0vvz4whg3d0s0l0y7qrm&st=yj0u5oti&dl=1",
      "https://www.dropbox.com/scl/fi/cbulcdevbnz1voyinqief/satisfy-you2-86.18.mp3?rlkey=x2p9qveyxr40gt8zz821yodei&st=2wum1jss&dl=1",
      "https://www.dropbox.com/scl/fi/qu81dkfffzwyy48xz7piw/you-shared-85.71.mp3?rlkey=59iz1vjsixwbfmnjhur0d6u15&st=48ua3wb1&dl=1",
      "https://www.dropbox.com/scl/fi/1a1wixmzkax05owimwqns/curtains-ep6.mp3?rlkey=4jd8q161ufhxmak5ejvv77lol&st=kqmw3uwf&dl=1",
      "https://www.dropbox.com/scl/fi/vs955bjzxt1mala3t01c4/holy-moly-automation.mp3?rlkey=aim1h2vhd2hyalesasvtksoz8&st=r9uoqjje&dl=1",
      "https://www.dropbox.com/scl/fi/p0ath0257lvu1xmtbu62s/ease-himself_1.mp3?rlkey=bitu2msyw4s2mka0c14ytc0gs&st=zownowyy&dl=1"
    ]
  },
  "scorpio_south_node": {
    beatNames: [
      "not real - 92 - 1_01",
      "cuando_1",
      "the berserkers",
      "spend my days ep6",
      "detective benson - 86 -1",
      "searching",
      "think thrice",
      "72-9 seq - 77.79"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/3blxyn6x4oji0bnwst1ck/not-real-92-1_01.mp3?rlkey=adyxxp9nuaeljmp9vvl5ycbr8&st=7dg24wnr&dl=1",
      "https://www.dropbox.com/scl/fi/97zlt1i6iqkk4bxvf0jwk/cuando_1.mp3?rlkey=88fyf1zouwpr9u2f3nkomryrw&st=td3bllg4&dl=1",
      "https://www.dropbox.com/scl/fi/ojt10tluayjvk3vo7byah/the-berserkers.mp3?rlkey=md51sfkivsmt7zv7tp6wrdh0o&st=6kh27nay&dl=1",
      "https://www.dropbox.com/scl/fi/mlzmsg4uiahb6fuzm44kh/spend-my-days-ep6.mp3?rlkey=oqx7nlh1tjbktnylj284t57ob&st=l0yam3gi&dl=1",
      "https://www.dropbox.com/scl/fi/vwefdy8eywl16g4okmbnl/detective-benson-86-1.mp3?rlkey=o8uroidykyyij68j4a3cfzs4d&st=4fvx466u&dl=1",
      "https://www.dropbox.com/scl/fi/fo571w3nfp0v5y9st8qqw/searching.mp3?rlkey=6qp287yzalgmcgtjyme8y5l66&st=w66pacxd&dl=1",
      "https://www.dropbox.com/scl/fi/z1j2chb6ub18jy9by25ei/think-thrice.mp3?rlkey=fpwiwrljo266izsdan35v0mcw&st=tu94bumg&dl=1",
      "https://www.dropbox.com/scl/fi/m4ejsmnqy4bgvzssd3lzn/72-9-seq-77.79.mp3?rlkey=5b1znt2u6snb3x707vfp2qtvp&st=ym9d4e80&dl=1"
    ]
  },
  "sagittarius_saturn": {
    beatNames: [
      "hornp-notic",
      "ahmad ride out",
      "embers - 86",
      "touch of your hand",
      "crazy bones - 1",
      "game over - 86",
      "nerd lips final 2"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/x8lubq3aorz873xl4yusk/hornp-notic.mp3?rlkey=sb9d6gdb1asjk1gm96w5orv1h&st=7ejtxihi&dl=1",
      "https://www.dropbox.com/scl/fi/yfyrbtf0bbedsz69qknnm/ahmad-ride-out.mp3?rlkey=tj3zvz3l2q575w55jjxb7qf9l&st=dny9452o&dl=1",
      "https://www.dropbox.com/scl/fi/pkx29h07x4j1m6y1ni8zr/embers-68.mp3?rlkey=l587q33dpjly9857dxq3g3yfn&st=q9xwlh8l&dl=1",
      "https://www.dropbox.com/scl/fi/u3ni2frlysv85nu08yc8j/touch-of-your-hand.mp3?rlkey=knoldsk0fmzfsp9z6euafm4jj&st=sxr8hcgy&dl=1",
      "https://www.dropbox.com/scl/fi/z9v3t7wqw8m7j70887q98/crazy-bones-1.mp3?rlkey=v90gfd03bfx2uhw1284okcssa&st=8fzdsbbf&dl=1",
      "https://www.dropbox.com/scl/fi/92vb8b788hty78ipucrdo/game-over-86.mp3?rlkey=pbyow8s5wf3afrqct9mofqh7y&st=vbh9wykp&dl=1",
      "https://www.dropbox.com/scl/fi/3eq1dhwwvfucrqfsysr6k/nerd-lips-final-2-one-more-hard-limit.mp3?rlkey=xt7kfvynh5v17bq6u5wrn3n4h&st=sici0gkk&dl=1"
    ]
  },
  "capricorn_cazimi": {
    beatNames: [
      "winter landed",
      "business as usual _1",
      "make it real - 86",
      "629-4 - 89",
      "what to do at night - 84"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/tim82olzh3r771k0slwb4/winter-landed.mp3?rlkey=c90fyvwspr3o5vqv8tmo17smv&st=npxul162&dl=1",
      "https://www.dropbox.com/scl/fi/7gzbgekxg1bdbkar06ouw/business-as-usual_1.mp3?rlkey=0pue9sq753zk2mm54umqfsnma&st=6j24kb49&dl=1",
      "https://www.dropbox.com/scl/fi/rm1at3kb933y37ieqatvm/make-it-real-86.mp3?rlkey=4lwxadgv44jtwkudkmwuqib8g&st=iv0zfnmg&dl=1",
      "https://www.dropbox.com/scl/fi/gxzfsegom423dvnehbw2i/629-4-89.mp3?rlkey=mcwemn53vpd1hw90tr69evmli&st=l2d0y1sp&dl=1",
      "https://www.dropbox.com/scl/fi/9qqp7y4d88giez01r7zl9/what-to-do-at-night-84.mp3?rlkey=u0fjpjxizq6dqeccpb3s18wob&st=sn0ujr25&dl=1"
    ]
  },
  "aquarius_jupiter": {
    beatNames: [
      "bobbie bongos",
      "sadness in the future",
      "purview_1",
      "here for you_1",
      "hold on forever - 65"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/ah3catgmmgtomqaljmrhr/bobbie-bongos.mp3?rlkey=dr1ohg6bs9fb209d58hiaxgia&st=cds0rz1k&dl=1",
      "https://www.dropbox.com/scl/fi/qth8ieju486lyq5s8gxug/sadness-in-the-future-71.35.mp3?rlkey=q175bf35ak0kuhp1hul1jt0j2&st=mq4iffe3&dl=1",
      "https://www.dropbox.com/scl/fi/ggl7ojbh6pc9a4rz7hqx6/purview_1.mp3?rlkey=tvj42buhgrtk1r283zftliqxw&st=2t399iif&dl=1",
      "https://www.dropbox.com/scl/fi/oyu93fo7p75n29azas4yn/here-for-you_1.mp3?rlkey=dmjpyza6tqosaqh8cnutpoxkm&st=liqjalb2&dl=1",
      "https://www.dropbox.com/scl/fi/drxrearj0gc1ox7ea51nw/hold-on-forever-65.mp3?rlkey=cgkbk6f17ogjrd1emq60qzwca&st=nwtg7eoi&dl=1"
    ]
  },
  "pisces_rising": {
    beatNames: [
      "lost and found",
      "landing v3",
      "home12 - 120",
      "world_s end",
      "629-5",
      "72=8 - 77.56"
    ],
    
    beatFiles: [
      "https://www.dropbox.com/scl/fi/udecurvihswzt3l9asldg/lost-and-found.mp3?rlkey=3dytgwm9zl840f1gpqtfc84qn&st=zezcqh7u&dl=1",
      "https://www.dropbox.com/scl/fi/arenro4ad5yojyt23dmyq/landing-v3.mp3?rlkey=bxvs39hmfsb6mwq0y3fary0kq&st=x4bs771l&dl=1",
      "https://www.dropbox.com/scl/fi/3kfbfc43idunhavl0c42q/home12-120.mp3?rlkey=ftr1s61nymkx19l1a15pqiquw&st=4v36amkx&dl=1",
      "https://www.dropbox.com/scl/fi/c5hm58qtxye9ry1duyypt/world_s-end.mp3?rlkey=bprn878wvu8p2npdm0h286wwi&st=yl0yza7q&dl=1",
      "https://www.dropbox.com/scl/fi/2d0pur0wy67hnh86u4v05/629-5-88.39.mp3?rlkey=j81446sslvf93eyci0dd9td4o&st=f5wzstpb&dl=1",
      "https://www.dropbox.com/scl/fi/5dcuu2xl0ddtmzkzwit72/72-8-77.56.mp3?rlkey=f7q7bnw96nyzvxwqhvwlm3szp&st=pr6hd9d7&dl=1",
    ]
  }};

let astroPlacements = [ // aka the first level of data in the above multidimensional array
  "aries_mercury",
  "taurus_north_node",
  "gemini_chiron",
  "cancer_sun",
  "leo_moon",
  "virgo_stellium",
  "libra_mars",
  "scorpio_south_node",
  "sagittarius_saturn",
  "capricorn_cazimi",
  "aquarius_jupiter",
  "pisces_rising"];

// Function to get a random zodiac sign
let getRandomAstroPlacement = function () {
  // Generate a random index based on the length of the zodiacSigns array
  let randomIndex = Math.floor(Math.random() * astroPlacements.length);
  // Return the zodiac sign at the random index
  return astroPlacements[randomIndex];
}

// Get a random zodiac sign
let currentAstroPlacement = getRandomAstroPlacement();

// Select the table where buttons will be placed
let buttonTable = document.getElementById("buttonTable");

// Function to create the table header with a dropdown menu
function createTableHeader() {
    let thead = document.createElement("thead");
    let tr = document.createElement("tr");
    const th = document.createElement("th");

    // Create the dropdown menu
    const dropdown = document.createElement("div");
    dropdown.className = "dropdown";

    const dropdownButton = document.createElement("button");
    dropdownButton.id = "zodiacDropdown";
    dropdownButton.classList.add("dropbtn");
    dropdownButton.classList.add("astroColor");
    dropdownButton.textContent = currentAstroPlacement;

    let dropdownContent = document.createElement("div");
    dropdownContent.className = "dropdown-content";


    // Populate the dropdown menu with options from the zodiac array
    Object.keys(data).forEach(zodiac => {
      let a = document.createElement("a");
      a.href = "#";
      a.textContent = zodiac;
      a.addEventListener("click", function (event) {
        event.preventDefault();
        currentAstroPlacement = zodiac; // Update currentZodiac
        dropdownButton.textContent = zodiac; // Change the button text to selected zodiac
        updateTable(); // Update table with new data
      });
      dropdownContent.appendChild(a);
    });

    dropdown.appendChild(dropdownButton);
    dropdown.appendChild(dropdownContent);

    th.appendChild(dropdown);
    th.colSpan = 3; // Make the header span across all columns

    tr.appendChild(th);
    thead.appendChild(tr);

    return thead;
  }

// Function to create an <li> element with class "beat" and an audio element
function createLi(beatName, index) {
    let li = document.createElement("li");
    li.classList.add("beat");
    li.classList.add("astroColor");
    li.textContent = beatName;

    // Create an <audio> element and set its src and id attributes
    let audio = document.createElement("audio");
    audio.src = data[currentAstroPlacement].beatFiles[index];
    audio.type = "audio/mpeg";
    audio.id = `aud${index}`; // Set the id attribute with prefix "aud" and index

    // Append the audio element to the <li> tag
    li.appendChild(audio);

    // Add click event to play the audio using external player
    li.addEventListener("click", function () {
      let player = document.getElementById("audioPlayer");
      player.src = audio.src; // Set the source of the player
      player.volume = 0.3;
      player.play(); // Play the audio

      // Update the music player title
      document.getElementById('musicPlayerTitle').textContent = beatName;
    });

    return li;
  }

// Function to create a button with an <li> element inside it
function createButton(beatName, index) {
    let button = document.createElement("button");

    // Create the <li> element and append it to the button
    let li = createLi(beatName, index);
    button.appendChild(li);

    return button;
  }

// Function to create a table cell with a button
function createTableCell(button) {
    let td = document.createElement("td");
    td.appendChild(button);
    return td;
  }

// Function to create a table row and add cells to it
function createTableRow(startIndex) {
    let tr = document.createElement("tr");

    // Add 3 cells to the row, one for each button
    for (let i = startIndex; i < startIndex + 3; i++) {
      if (i < data[currentAstroPlacement].beatNames.length) {
        let button = createButton(data[currentAstroPlacement].beatNames[i], i);
        let cell = createTableCell(button);
        tr.appendChild(cell);
      } else {
        // Add an empty cell if there are no more items
        let emptyCell = document.createElement("td");
        tr.appendChild(emptyCell);
      }
    }
    return tr;
  }

// Function to update the table with the current zodiac data
let updateTable = function() {
// Ensure buttonTable references the correct element
  buttonTable = document.getElementById("buttonTable");

  // Force replace the table to fully clear it
  const newTable = document.createElement("table");
  newTable.id = "buttonTable";
  buttonTable.replaceWith(newTable);
  buttonTable = newTable; // Update the reference
  console.log("Table fully replaced.");

  // Recreate and append the table header
  let header = createTableHeader();
  buttonTable.appendChild(header);
  console.log("Header added.");

  // Recreate and append table rows
  for (let i = 0; i < data[currentAstroPlacement].beatNames.length; i += 3) {
    let row = createTableRow(i);
    buttonTable.appendChild(row);
    console.log(`Row starting at index ${i} added.`);
  }

  console.log("Final table content:", buttonTable.innerHTML);
  };

let switchBackgrounds = function() {
  let elements = document.querySelectorAll('.dropbtn');

  elements.forEach(element => {
    let placement = element.textContent.trim();  // Read text content

    let bgColor = '';
    let textColor = '';

    switch (placement) {
      case astroPlacements[0]:
        bgColor = 'crimson';
        break;
      case astroPlacements[1]:
        bgColor = 'mediumorchid';
        break;
      case astroPlacements[2]:
        bgColor = 'khaki';
        break;
      case astroPlacements[3]:
        bgColor = 'ivory';
        break;
      case astroPlacements[4]:
        bgColor = 'gold';
        break;
      case astroPlacements[5]:
        bgColor = 'olive';
        break;
      case astroPlacements[6]:
        bgColor = 'mediumspringgreen';
        break;
      case astroPlacements[7]:
        bgColor = 'darkorange';
        break;
      case astroPlacements[8]:
        bgColor = 'turquoise';
        break;
      case astroPlacements[9]:
        bgColor = 'darkgrey';
        textColor = 'white';
        break;
      case astroPlacements[10]:
        bgColor = 'white';
        textColor = 'saddlebrown';
        break;
      case astroPlacements[11]:
        bgColor = 'magenta';
        break;
      default:
        bgColor = 'white';
    }

    element.style.backgroundColor = bgColor;
    if (textColor) element.style.color = textColor;

    let contPanel = document.querySelector(".captPanel");
    contPanel.style.backgroundColor = bgColor;

    let beats = document.querySelectorAll('.beat');
    beats.forEach(beat => {
      beat.dataset.bgColor = bgColor;

      // Check if the event listener is already attached to avoid duplicates
      if (!beat.dataset.listenerAdded) {
        beat.addEventListener('mouseenter', () => {
          beat.style.backgroundColor = beat.dataset.bgColor;
        });

        beat.addEventListener('mouseleave', () => {
          beat.style.backgroundColor = ''; // Reset background
        });

        // Mark that the listener has been added
        beat.dataset.listenerAdded = true;
      }
    });
  });
} ;

// Initialize the table with default zodiac data
updateTable();

// Load a random beat when the page loads
loadRandomBeat();


/* making a big ol' break here to separate the
table formulation from the audio player mechanics.
 */

// Controls for custom audio player
const player = document.getElementById("audioPlayer");
const volumeSlider = document.getElementById("volume-slider");
const volumeDisplay = document.getElementById("volume-display"); // Optional

volumeSlider.addEventListener("input", () => {
  player.volume = volumeSlider.value;
  updateVolumeDisplay(); // Optional
});
function updateVolumeDisplay() {
  volumeDisplay.textContent = `Volume: ${Math.floor(player.volume * 100)}%`;}

// Function to load a random beat on page load
function loadRandomBeat() {
  const player = document.getElementById("audioPlayer");


  let beatSrcLoad = data[currentAstroPlacement].beatFiles;
  let randomIndex = Math.floor(Math.random() * beatSrcLoad.length);
  let beatNamesLoad = data[currentAstroPlacement].beatNames;
  player.src = beatSrcLoad[randomIndex];
  player.play();
  
  // Update the music player title
  document.getElementById('musicPlayerTitle').textContent = beatNamesLoad[randomIndex];
  
  // Make the random song start the function 1st song of the order
  // let currentSongIndex = randomIndex;
  //let isRepeatMode = false; // Initial state is 'play in order' from wherever we are starting
  
  let signText = document.getElementById('zodiacDropdown').textContent;
  document.getElementById('playInOrder').textContent = 'loop ' + signText + '\n\n✅';
  console.log(player.src);
  
  // Call the function to update all elements
  switchBackgrounds();
  }

// Function to play random beat when a beat has ended (aka 'shuffle all placements' mode)
function goToRandomBeat() {
  const player = document.getElementById("audioPlayer");



  let beatSrcLoad = data[currentAstroPlacement].beatFiles;
  console.log("the new random astroPlacment: " + currentAstroPlacement);
  let randomIndex = Math.floor(Math.random() * beatSrcLoad.length);
  let beatNamesLoad = data[currentAstroPlacement].beatNames;

  player.src = beatSrcLoad[randomIndex];
  player.play();

  // Update the music player title
  document.getElementById('musicPlayerTitle').textContent = beatNamesLoad[randomIndex];
  document.getElementById('zodiacDropdown').textContent = currentAstroPlacement;
  console.log(beatNamesLoad[randomIndex]);
  console.log(currentAstroPlacement);

  updateTable();

  let signTextPush = document.getElementById('zodiacDropdown');
  signTextPush.textContent = currentAstroPlacement;
  console.log(signTextPush);
  console.log(signTextPush.textContent);

  switchBackgrounds();


  //document.getElementById('playInOrder').textContent = 'loop ' + signText + ':\n❌';
  //console.log(signText);

  console.log(player.src);
  console.log(currentAstroPlacement);
  console.log(data[currentAstroPlacement]);

}

// Function to repeat song
function repeatSong() {
  // If repeat mode is on, replay the current song
  player.currentTime = 0;
  player.play();
}

// Play next song in the order (aka 'loop astrological placement' mode)
function playNextSong() {
  let player = document.getElementById("audioPlayer");
  let beatSrcLoad = data[currentAstroPlacement].beatFiles;
  let currentSongIndex = beatSrcLoad.indexOf(player.src);
  let nextSongIndex;
  let beatNamesLoad = data[currentAstroPlacement].beatNames;
  
  console.log("number of beats in this placement: " + beatSrcLoad.length);
  console.log("index of the beat that just ended: " + currentSongIndex);
  
  if (currentSongIndex + 1 >= beatSrcLoad.length) {
    // if we've hit the end of the list, go back to the beginning
    nextSongIndex = 0; // Loop back to first song if at the end
    console.log("number of beats in this placement: " + beatSrcLoad.length);
    console.log("index of beat that just started: " + nextSongIndex);
    } else {
    nextSongIndex = currentSongIndex + 1;
    console.log("number of beats in this placement: " + beatSrcLoad.length);
    console.log("index of beat that just started: " + nextSongIndex);
  }
  
  player.src = beatSrcLoad[nextSongIndex];
  player.play();
  
  // Update the music player title
  document.getElementById('musicPlayerTitle').textContent = beatNamesLoad[nextSongIndex];
  console.log("number of beats in this placement: " + beatSrcLoad.length);
  console.log("name of the beat that just started: " + beatNamesLoad[nextSongIndex]);
}

function playPreviousSong() {
  
  let player = document.getElementById("audioPlayer");
  let beatSrcLoad = data[currentAstroPlacement].beatFiles;
  let currentSongIndex = beatSrcLoad.indexOf(player.src);
  let nextSongIndex;
  let beatNamesLoad = data[currentAstroPlacement].beatNames;
  
  console.log("number of beats in this placement: " + beatSrcLoad.length);
  console.log("index of the beat that just ended: " + currentSongIndex);
  
  if (currentSongIndex > 0) {
    nextSongIndex = currentSongIndex - 1;  // Decrease the index to go to the previous track
     } else {
    nextSongIndex = beatSrcLoad.length -1;
    console.log('Already at the first song!');
  }
  
  player.src = beatSrcLoad[nextSongIndex];
  player.play();
  
  // Update the music player title
  document.getElementById('musicPlayerTitle').textContent = beatNamesLoad[nextSongIndex];
  console.log("number of beats in this placement: " + beatSrcLoad.length);
  console.log("name of the beat that just started: " + beatNamesLoad[nextSongIndex]);

};

const nextTrackButton = document.getElementById('nextTrack');
const prevTrackButton = document.getElementById('prevTrack');

// Button for Go To Next Track
nextTrackButton.addEventListener('click',() => {
  if (isShuffleAll) {
    // If shuffle all mode is on, proceed with your existing logic
    currentAstroPlacement = getRandomAstroPlacement();
    goToRandomBeat();
    updateButtonText();
    console.log(currentAstroPlacement);  // Debugging log
  }  else {
    playNextSong();  // Play the next song in order
  }
});

// Button for Previous Track
prevTrackButton.addEventListener('click',() => {
  if (isShuffleAll) {
    // If shuffle all mode is on, proceed with your existing logic
    currentAstroPlacement = getRandomAstroPlacement();
    goToRandomBeat();
    updateButtonText();
    console.log(currentAstroPlacement);  // Debugging log
  }  else {
    playPreviousSong();  // Play the next song in order
  }
});

// Update the button text to reflect the current mode
function updateButtonText() {
  let signText = document.getElementById('zodiacDropdown').textContent;
  document.getElementById('playInOrder').textContent = isPlayInOrder ? 'loop ' + signText + '\n\n✅' : 'loop ' + signText + '\n\n❌';
  document.getElementById('toggleRepeat').textContent = isRepeatMode ? 'repeat one\n\n✅' : 'repeat one\n\n❌';
  document.getElementById('shuffleAll').textContent = isShuffleAll ? 'shuffle zodiac\n\n✅' : 'shuffle zodiac\n\n❌';
}

function forShuffle(){
goToRandomBeat();
}

// Event listener for when the audio ends
player.addEventListener('ended', () => {
  if (isRepeatMode) {
  repeatSong();
  }
  
  else if (isPlayInOrder) {
  playNextSong();
  }
  
  else if (isShuffleAll) {
  // If shuffle all mode is on, proceed with your existing logic
currentAstroPlacement = getRandomAstroPlacement();
goToRandomBeat();
updateButtonText();
    console.log(currentAstroPlacement);

  }
});

// Variable to track repeat mode
let isPlayInOrder = true;
let isRepeatMode = false;
let isShuffleAll = false;



// Toggle Play in Order button functionality
document.getElementById('playInOrder').addEventListener('click', function() {
  // Activate Play in Order Mode and deactivate others
  isRepeatMode = false;
  isPlayInOrder = true;
  isShuffleAll = false;
  updateButtonText();
});

// Toggle Repeat Mode button functionality
document.getElementById('toggleRepeat').addEventListener('click', function() {
  // Activate Repeat Mode and deactivate others
  isRepeatMode = true;
  isPlayInOrder = false;
  isShuffleAll = false;
  updateButtonText();
});

// Toggle Random Mode button functionality
document.getElementById('shuffleAll').addEventListener('click', function() {
  // Activate Random Mode and deactivate others
  isRepeatMode = false;
  isPlayInOrder = false;
  isShuffleAll = true;
  updateButtonText();
});

document.querySelector('.dropdown-content a').addEventListener('click', switchBackgrounds);

